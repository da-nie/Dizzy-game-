//****************************************************************************************************
//подключаемые библиотеки
//****************************************************************************************************
#include "cactionmessage.h"

//****************************************************************************************************
//глобальные переменные
//****************************************************************************************************

//****************************************************************************************************
//константы
//****************************************************************************************************

//****************************************************************************************************
//макроопределения
//****************************************************************************************************

//****************************************************************************************************
//конструктор и деструктор
//****************************************************************************************************

//----------------------------------------------------------------------------------------------------
//конструктор
//----------------------------------------------------------------------------------------------------
CActionMessage::CActionMessage(const std::string &message,int32_t screen_x,int32_t screen_y,std::shared_ptr<IAction> iAction_Ptr)
{ 
 Message=message;
 ScreenX=screen_x;
 ScreenY=screen_y;
 iAction_NextPtr=iAction_Ptr;
 Init();
}
//----------------------------------------------------------------------------------------------------
//деструктор
//----------------------------------------------------------------------------------------------------
CActionMessage::~CActionMessage()
{
}

//****************************************************************************************************
//закрытые функции
//****************************************************************************************************

//----------------------------------------------------------------------------------------------------
//
//----------------------------------------------------------------------------------------------------

//****************************************************************************************************
//открытые функции
//****************************************************************************************************

//----------------------------------------------------------------------------------------------------
//выполнить действие с элементом
//----------------------------------------------------------------------------------------------------
void CActionMessage::Execute(std::shared_ptr<IPart> iPart_Ptr,CGameState &cGameState)
{
 //добавляем сообщение в очередь сообщений
 cGameState.AddMessage(Message,ScreenX,ScreenY); 
 if (iAction_NextPtr.get()!=NULL) iAction_NextPtr->Execute(iPart_Ptr,cGameState);	
}
//----------------------------------------------------------------------------------------------------
//инициализация
//----------------------------------------------------------------------------------------------------
void CActionMessage::Init(void)
{
 if (iAction_NextPtr.get()!=NULL) iAction_NextPtr->Init();
}